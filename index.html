<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Proof-Easy｜簡易校正ツール</title>
  <link rel="stylesheet" href="style.css">
  <!-- ライブラリ読み込み -->
  <!-- ✅ PDF.js 本体と Worker を 3.4.120 に統一 -->
   <link rel="icon" href="favicon.png" type="image/png">
<script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/build/pdf.min.js"></script>
<script>
  pdfjsLib = window['pdfjs-dist/build/pdf'];
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/build/pdf.worker.min.js';
</script>

<!-- ✅ Excel & OCR -->
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.1/dist/tesseract.min.js"></script>

</head>

<body>
  <h1>🛠 Proof-Easy｜簡易校正ツール</h1>

  <div class="section">
    <label>モード選択：</label>
    <label><input type="checkbox" id="modeA" checked /> A：売価・数量チェック</label>
    <label><input type="checkbox" id="modeB" checked /> B：テキスト差分チェック</label>
  </div>

  <div class="section">
    <label>原稿データを選択：</label>
    <input type="file" id="sourceFile" accept=".pdf,.xlsx" />
    <label><input type="radio" name="sourceMode" value="pdf" checked /> PDF</label>
    <label><input type="radio" name="sourceMode" value="excel" /> Excel</label>
    <label><input type="checkbox" id="useOCR" /> OCRを使う（PDFが画像の場合）</label>
  </div>

  <div class="section">
    <label>完成デザイン（PDF）を選択：</label>
    <input type="file" id="designPDF" accept=".pdf" />
  </div>

  <div class="section">
    <label>原稿テキスト</label>
    <textarea id="sourceText" rows="8" placeholder="原稿のテキストがここに表示されます"></textarea>
  </div>

  <div class="section">
    <label>完成デザインテキスト</label>
    <textarea id="designText" rows="8" placeholder="完成デザインのテキストがここに表示されます"></textarea>
  </div>

  <button onclick="runCheck()">チェックする</button>
  <div id="result" class="result"></div>

  <canvas id="hiddenCanvas" style="display:none;"></canvas>

  <script src="script.js"></script>
</body>

</html>